## 快速上线一个网站

#### 事先需要准备的素材：

1、github账号；[GitHub · Build and ship software on a single, collaborative platform · GitHub](https://github.com/)

2、网站的代码；自己事先编写完成；

3、vercel账号；[Vercel: Build and deploy the best web experiences with the AI Cloud](https://vercel.com/)



**具体步骤：**

1、登录自己的github账号，创建一个新的仓库todo(以todo app为例)，

然后将之前的index.html，script.js以及style.css等文件复制到该仓库中；

2、登录vercel账号，关联自己的github账号，然后将todo仓库中的代码进行部署；

[Todo App](https://todo-tawny-rho.vercel.app/)



**使用自己的域名替代Vercel的默认域名：**

1、Namesilo域名厂商(支持支付宝)购买域名：[Namesilo](https://www.namesilo.com/?rid=7e17911ma)

2、cloudflare: 添加对域名的解析；



**具体步骤：**

1、从[Namesilo](https://www.namesilo.com/?rid=7e17911ma)购买域名；

2、将域名的dns设置为cloudflare，添加到Namesilo的后台；

3、vercel中设置域名，并且将A标签与CNAME标签添加到cloudflare；

4、在vercel与cloudflare中设置SSL证书；



user->cloudflare->vercel



**上述步骤涉及的计算机网络原理：**

**1. 域名服务器（DNS）配置**

- **原理**：DNS（Domain Name System）将域名（如 `memorytest.io`）转换为IP地址。当用户访问域名时，浏览器会查询DNS记录以找到对应的服务器地址。

- **操作步骤**：

  - 将域名注册商的DNS服务器改为Cloudflare提供的名称服务器（如 `rommy.ns.cloudflare.com`）。
  - 这样，所有对该域名的DNS查询将由Cloudflare处理，而非原始注册商的DNS服务。

- **作用**：

  - Cloudflare成为权威DNS提供商，可以控制域名的解析逻辑（如A记录、CNAME记录等）。

  - 后续的流量会经过Cloudflare的网络，便于实现代理和缓存。

    

**2.Vercel中配置域名：**

**作用**：

- Vercel确认域名归属后，会将部署的项目与域名绑定，生成SSL证书（如Let's Encrypt），支持HTTPS访问。

**操作步骤**：

- 在Vercel中添加自定义域名（`memorytest.io`），并按照提示验证DNS记录（需与Cloudflare中配置一致）。



**3.Cloudflare代理与Vercel的DNS记录**

- **原理**：Cloudflare作为反向代理，拦截用户请求并转发到源服务器（这里是Vercel托管的服务）。
- **操作步骤**：
  - 在Cloudflare中添加Vercel提供的DNS记录：
    - **A记录**：将根域名（`memorytest.io`）指向Vercel的IP地址（如 `76.76.21.21`）。
    - **CNAME记录**：将子域名（如 `www`）指向Vercel的别名（`cname.vercel-dns.com`）。
  - 启用Cloudflare的代理功能（橙色云图标），使流量经过Cloudflare的网络。
- **作用**：
  - **代理模式**：用户访问域名时，请求先到达Cloudflare的边缘节点，再由Cloudflare转发到Vercel。这隐藏了源服务器IP，并提供DDoS防护和缓存加速。



**4.**SSL/TLS加密模式（完全严格模式）****

- **原理**：HTTPS通信需要端到端加密，防止中间人攻击。
- **操作步骤**：
  - 在Cloudflare的SSL/TLS设置中选择**完全（严格）模式**：
    - Cloudflare与用户之间：使用Cloudflare的证书加密（自动生成）。
    - Cloudflare与Vercel之间：验证Vercel的证书（必须由可信CA签发）。
- **作用**：
  - 避免重定向循环（如错误配置导致的`ERR_TOO_MANY_REDIRECTS`）。
  - 确保从用户到源服务器的全程加密。

