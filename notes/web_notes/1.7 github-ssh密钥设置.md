## github设置ssh密码

### 参考视频：

https://www.bilibili.com/video/BV1dV411G77N/?spm_id_from=333.337.search-card.all.click

### 思路：

1、使用本地的Powershell(管理员模式打开)，生成SSH的公钥和密钥文件；
 2、将SSH私钥添加到本地；将SSH公钥添加到github后端；

### 具体步骤：

以windows系统为例，

**步骤1：使用git bash创建密钥和公钥**
 打开git bash，然后输入如下命令：

```
ssh-keygen -t ed25519 -C "your_email@example.com"
```

邮箱名换成你自己的。
 过程中，他会要求你输入一个passphase的东西，为了增强安全性，你可以输入一个短语(输入后自己要记住。)

如果一切顺利，会在你的C:\users\YOURNAME.ssh\目录下生成你两个文件：

- id_ed25519
- id_ed25519.pub

带.pub是公钥文件，没有带的是私钥文件。

**步骤2：将私钥添加到本地**
 以管理员权限打开PowerShell，然后使用如下命令，启动ssh-agent：

```
$: Get-Service -Name ssh-agent | Set-Service -StartupType Manual 
$: Start-Service ssh-agent
```

然后，再打开另外一个命令行窗口(不需要管理员权限)，在窗口中输入如下命令，添加私钥：

```
ssh-add c:/Users/YOU/.ssh/id_ed25519
```

**步骤3：将公钥添加到github账户后台**
 登录你的github账号，点击右上角的头像，然后找到并点击"Settings"，点击"SSH and GPG keys"，点击"New SSH key"，结合自己的使用场景，取一个名字，然后选择"Authentication Key"，在key输入框中粘贴"id_ed25519.pub"中的内容，点击"Add SSH key"，完成添加。

**步骤4：测试SSH链接**
 打开Git Bash终端，然后输入如下命令：

```
ssh -T git@github.com
```

如果可以顺利连接，就会出现如下的文字：

```
> Hi USERNAME! You've successfully authenticated, but GitHub does not> provide shell access.
```

**步骤5：使用SSH上传代码(注意事项要修改config文件来确定使用的key)**
 新建仓库，运行如下的一些命令，将本地代码上传到服务器：

```
git add README.md
git commit -m "first commit"
git branch -M main
git remote add origin git@github.com:tfzhang655/test.git
git push -u origin main
```

其中最重要的是要选用SSH而不是HTTPS的设置。

**注意事项：**
 如果安装了多个ssh agent证书，要在多个证书之间切换，可以配置config文件，来选择优先使用的证书。在.ssh/目录下创建config文件，文件中具体的内容如下：

```
Host github.com
    HostName github.com
    User YOU_NAME
    IdentityFile c:/Users/YOU/.ssh/id_ed25519_daodog
```

将上述的YOU_NAME修改为github的用户名，将YOU修改为本地对应的目录名。

### 参考文献：

1、https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent
 2、https://docs.github.com/en/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection

### 来自github的信息：

#### or create a new repository on the command line

echo "# adhd" >> README.md
 git init
 git add README.md
 git commit -m "first commit"
 git branch -M main
 git remote add origin git@github.com:daodog55/adhd.git
 git push -u origin main

------

#### …or push an existing repository from the command line

git remote add origin git@github.com:daodog55/adhd.git
 git branch -M main
 git push -u origin main